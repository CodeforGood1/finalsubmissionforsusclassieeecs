# Environment Configuration for Sustainable Classroom LMS
# Copy this file to .env and configure for your deployment

# ===========================================
# DATABASE CONFIGURATION
# ===========================================
# PostgreSQL connection string (configured in docker-compose.yml for Docker)
DATABASE_URL=postgresql://lms_admin:SecureLocalDB2026@localhost:5432/sustainable_classroom
DB_SSL=false

# ===========================================
# SERVER CONFIGURATION
# ===========================================
NODE_ENV=production
PORT=5000

# ===========================================
# AUTHENTICATION & SECURITY
# ===========================================
# Generate with: openssl rand -base64 32
JWT_SECRET=ChangeThisToASecureRandomString

# Admin credentials (change after first login)
ADMIN_EMAIL=admin@classroom.local
ADMIN_PASSWORD=Admin@2026

# ===========================================
# EMAIL CONFIGURATION
# ===========================================
# OPTION 1: LOCAL MAILHOG (Default - No Internet Required)
# MailHog captures emails locally. View at: http://localhost:8025
# This is the default configuration for offline deployments
SMTP_HOST=mailhog
SMTP_PORT=1025
SMTP_SECURE=false
EMAIL_FROM_NAME=Sustainable Classroom
EMAIL_FROM_ADDRESS=noreply@classroom.local

# OPTION 2: GMAIL SMTP (Optional - Requires Internet)
# Uncomment these lines to use Gmail for real email delivery:
# EMAIL_SERVICE=gmail
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASSWORD=your-google-app-password
# EMAIL_FROM_NAME=Sustainable Classroom
# EMAIL_FROM_ADDRESS=your-email@gmail.com
#
# To get Google App Password:
# 1. Go to https://myaccount.google.com/security
# 2. Enable 2-Step Verification if not already enabled
# 3. Go to https://myaccount.google.com/apppasswords
# 4. Select "Mail" and "Other (Custom name)" - name it "Classroom LMS"
# 5. Click Generate and copy the 16-character password
# 6. Paste it in SMTP_PASSWORD above (no spaces)

# ===========================================
# FRONTEND & CORS
# ===========================================
FRONTEND_URL=http://localhost:5000

# ===========================================
# FILE STORAGE
# ===========================================
UPLOAD_DIR=/app/backend/uploads
UPLOAD_MAX_SIZE_MB=500

# ===========================================
# REDIS CACHE (Optional)
# ===========================================
# REDIS CACHE
# ===========================================
REDIS_ENABLED=true
REDIS_HOST=redis
REDIS_PORT=6379

# ===========================================
# CODE EXECUTION
# ===========================================
# Local Piston API for offline code execution
PISTON_URL=http://piston:2000

# ===========================================
# VIDEO CONFERENCING
# ===========================================
# Local Jitsi server URL (runs in Docker)
JITSI_SERVER_URL=https://localhost:8443
# Leave empty to use public meet.jit.si

# ===========================================
# PRODUCTION DEPLOYMENT NOTES
# ===========================================
# For 1000+ concurrent users on LAN network:
#
# 1. API Gateway: Kong or Traefik
#    - Rate limiting per IP/user
#    - Load balancing across replicas
#    - API monitoring & analytics
#
# 2. Caching Layer: Varnish or Apache Traffic Server
#    - Cache static assets locally
#    - Cache API responses (5min TTL)
#    - Reduce database load by 80%
#
# 3. Container Registry: JFrog Artifactory or Harbor
#    - Host Docker images on LAN (E:\registry)
#    - Vulnerability scanning
#    - Faster pulls within network
#
# 4. Kubernetes Deployment:
#    Backend replicas: 3-5 pods
#    CPU requests: 500m, limits: 2000m
#    Memory requests: 512Mi, limits: 2Gi
#    PostgreSQL: Persistent volume 100Gi+ (E:\pgdata)
#
# 5. Database Optimization:
#    - Connection pooling: max 50 connections
#    - PgBouncer for connection management
#    - Read replicas for analytics queries
#
# 6. Storage Configuration:
#    - Install on E:\ drive (not C:\)
#    - Persistent volumes: E:\k8s-volumes\
#    - PostgreSQL data: E:\pgdata\
#    - Uploads: E:\uploads\
#    - Logs: E:\logs\
#
# 7. Kubernetes Secrets (instead of .env):
#    kubectl create secret generic classroom-secrets \
#      --from-literal=jwt-secret=$(openssl rand -base64 32) \
#      --from-literal=db-password=$(openssl rand -base64 32) \
#      --from-literal=admin-password=$(openssl rand -base64 16)
#
# 8. Monitoring Stack:
#    - Prometheus + Grafana (on E:\monitoring)
#    - AlertManager for critical alerts
#    - Loki for log aggregation
#    - Node exporter for system metrics

# Enable email notifications
ENABLE_EMAIL_NOTIFICATIONS=true

# Session timeout in hours
SESSION_TIMEOUT=24
