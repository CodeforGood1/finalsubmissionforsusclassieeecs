 Image refine-backend Building 
#1 [internal] load local bake definitions
#1 reading from stdin 527B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 1.09kB 0.0s done
#2 DONE 0.0s

#3 [internal] load metadata for docker.io/library/node:20-alpine
#3 ...

#4 [auth] library/node:pull token for registry-1.docker.io
#4 DONE 0.0s

#3 [internal] load metadata for docker.io/library/node:20-alpine
#3 DONE 2.1s

#5 [internal] load .dockerignore
#5 transferring context: 1.18kB done
#5 DONE 0.0s

#6 [internal] load build context
#6 DONE 0.0s

#7 [frontend-builder 1/6] FROM docker.io/library/node:20-alpine@sha256:09e2b3d9726018aecf269bd35325f46bf75046a643a66d28360ec71132750ec8
#7 resolve docker.io/library/node:20-alpine@sha256:09e2b3d9726018aecf269bd35325f46bf75046a643a66d28360ec71132750ec8 0.1s done
#7 DONE 0.1s

#8 [frontend-builder 2/6] WORKDIR /app/client
#8 CACHED

#9 [stage-1 2/8] WORKDIR /app/backend
#9 CACHED

#6 [internal] load build context
#6 transferring context: 1.29MB 0.8s done
#6 DONE 1.1s

#10 [frontend-builder 3/6] COPY client/package*.json ./
#10 DONE 0.3s

#11 [stage-1 3/8] RUN apk add --no-cache     postgresql-client     curl     python3     py3-pip     openjdk17     g++     make
#11 1.580 ( 1/79) Installing brotli-libs (1.2.0-r0)
#11 1.632 ( 2/79) Installing c-ares (1.34.6-r0)
#11 1.653 ( 3/79) Installing libunistring (1.4.1-r0)
#11 1.735 ( 4/79) Installing libidn2 (2.3.8-r0)
#11 1.754 ( 5/79) Installing nghttp2-libs (1.68.0-r0)
#11 1.771 ( 6/79) Installing nghttp3 (1.13.1-r0)
#11 1.788 ( 7/79) Installing libpsl (0.21.5-r3)
#11 1.802 ( 8/79) Installing zstd-libs (1.5.7-r2)
#11 1.850 ( 9/79) Installing libcurl (8.17.0-r1)
#11 1.891 (10/79) Installing curl (8.17.0-r1)
#11 1.953 (11/79) Installing libstdc++-dev (15.2.0-r2)
#11 2.451 (12/79) Installing jansson (2.14.1-r0)
#11 2.464 (13/79) Installing binutils (2.45.1-r0)
#11 2.853 (14/79) Installing libgomp (15.2.0-r2)
#11 2.878 (15/79) Installing libatomic (15.2.0-r2)
#11 2.885 (16/79) Installing gmp (6.3.0-r4)
#11 2.914 (17/79) Installing isl26 (0.26-r1)
#11 3.010 (18/79) Installing mpfr4 (4.2.2-r0)
#11 3.052 (19/79) Installing mpc1 (1.3.1-r1)
#11 3.065 (20/79) Installing gcc (15.2.0-r2)
#11 ...

#12 [frontend-builder 4/6] RUN npm ci
#12 ...

#11 [stage-1 3/8] RUN apk add --no-cache     postgresql-client     curl     python3     py3-pip     openjdk17     g++     make
#11 29.15 (21/79) Installing musl-dev (1.2.5-r21)
#11 78.45 (22/79) Installing g++ (15.2.0-r2)
#11 ...

#12 [frontend-builder 4/6] RUN npm ci
#12 77.22 
#12 77.22 added 332 packages, and audited 333 packages in 1m
#12 77.22 
#12 77.22 124 packages are looking for funding
#12 77.22   run `npm fund` for details
#12 77.24 
#12 77.24 8 vulnerabilities (3 moderate, 5 high)
#12 77.24 
#12 77.24 To address issues that do not require attention, run:
#12 77.24   npm audit fix
#12 77.24 
#12 77.24 To address all issues (including breaking changes), run:
#12 77.24   npm audit fix --force
#12 77.24 
#12 77.24 Run `npm audit` for details.
#12 77.24 npm notice
#12 77.24 npm notice New major version of npm available! 10.8.2 -> 11.10.1
#12 77.24 npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.10.1
#12 77.24 npm notice To update run: npm install -g npm@11.10.1
#12 77.24 npm notice
#12 DONE 45.6s

#11 [stage-1 3/8] RUN apk add --no-cache     postgresql-client     curl     python3     py3-pip     openjdk17     g++     make
#11 ...

#13 [frontend-builder 5/6] COPY client/ .
#13 ...

#11 [stage-1 3/8] RUN apk add --no-cache     postgresql-client     curl     python3     py3-pip     openjdk17     g++     make
#11 49.38 (23/79) Installing make (4.4.1-r3)
#11 49.40 (24/79) Installing java-common (1.0-r1)
#11 49.40 (25/79) Installing libffi (3.5.2-r0)
#11 49.41 (26/79) Installing libtasn1 (4.21.0-r0)
#11 49.43 (27/79) Installing p11-kit (0.25.5-r2)
#11 49.47 (28/79) Installing p11-kit-trust (0.25.5-r2)
#11 49.50 (29/79) Installing ca-certificates (20251003-r0)
#11 49.53 (30/79) Installing java-cacerts (1.1-r0)
#11 49.54 (31/79) Installing openjdk17-jre-headless (17.0.18_p8-r0)
#11 67.65 (32/79) Installing libxau (1.0.12-r0)
#11 67.65 (33/79) Installing libmd (1.1.0-r0)
#11 67.66 (34/79) Installing libbsd (0.12.2-r0)
#11 67.68 (35/79) Installing libxdmcp (1.1.5-r1)
#11 67.69 (36/79) Installing libxcb (1.17.0-r1)
#11 68.72 (37/79) Installing libx11 (1.8.12-r1)
#11 ...

#13 [frontend-builder 5/6] COPY client/ .
#13 DONE 23.4s

#14 [frontend-builder 6/6] RUN npm run build
#14 ...

#11 [stage-1 3/8] RUN apk add --no-cache     postgresql-client     curl     python3     py3-pip     openjdk17     g++     make
#11 71.41 (38/79) Installing libxext (1.3.6-r2)
#11 107.4 (39/79) Installing libxi (1.8.2-r0)
#11 107.5 (40/79) Installing libxrender (0.9.12-r0)
#11 107.5 (41/79) Installing libxtst (1.2.5-r0)
#11 107.5 (42/79) Installing alsa-lib (1.2.14-r2)
#11 107.5 (43/79) Installing libbz2 (1.0.8-r6)
#11 107.5 (44/79) Installing libpng (1.6.54-r0)
#11 107.6 (45/79) Installing freetype (2.14.1-r0)
#11 75.00 (46/79) Installing giflib (5.2.2-r1)
#11 75.99 (47/79) Installing libjpeg-turbo (3.1.2-r0)
#11 76.02 (48/79) Installing lcms2 (2.17-r0)
#11 76.05 (49/79) Installing openjdk17-jre (17.0.18_p8-r0)
#11 77.16 (50/79) Installing openjdk17-jmods (17.0.18_p8-r0)
#11 ...

#14 [frontend-builder 6/6] RUN npm run build
#14 6.996 
#14 6.996 > sustainable-classroom-client@0.0.0 build
#14 6.996 > npm run clean && vite build
#14 6.996 
#14 7.230 
#14 7.230 > sustainable-classroom-client@0.0.0 clean
#14 7.230 > node -e "const fs = require('fs'); ['dist', 'node_modules/.vite', '.vite'].forEach(d => { try { fs.rmSync(d, {recursive: true, force: true}); console.log('Cleaned:', d); } catch(e) {} })"
#14 7.230 
#14 7.282 Cleaned: dist
#14 7.283 Cleaned: node_modules/.vite
#14 7.284 Cleaned: .vite
#14 7.638 vite v5.4.21 building for production...
#14 7.744 transforming...
#14 21.48 Ô£ô 82 modules transformed.
#14 21.82 rendering chunks...
#14 21.84 computing gzip size...
#14 21.86 dist/index.html                   0.41 kB Ôöé gzip:   0.27 kB
#14 21.86 dist/assets/index-DcpvpIgm.css   42.98 kB Ôöé gzip:   7.52 kB
#14 21.86 dist/assets/index-CPlTH5cy.js   427.11 kB Ôöé gzip: 113.42 kB
#14 21.86 Ô£ô built in 14.17s
#14 DONE 23.3s

#11 [stage-1 3/8] RUN apk add --no-cache     postgresql-client     curl     python3     py3-pip     openjdk17     g++     make
#11 95.86 (51/79) Installing openjdk17-jdk (17.0.18_p8-r0)
#11 96.56 (52/79) Installing openjdk17-demos (17.0.18_p8-r0)
#11 97.33 (53/79) Installing openjdk17-doc (17.0.18_p8-r0)
#11 97.37 (54/79) Installing openjdk17 (17.0.18_p8-r0)
#11 97.38 (55/79) Installing postgresql-common (1.2-r2)
#11 97.39   Executing postgresql-common-1.2-r2.pre-install
#11 97.46 (56/79) Installing lz4-libs (1.10.0-r0)
#11 97.51 (57/79) Installing libpq (18.2-r0)
#11 97.55 (58/79) Installing ncurses-terminfo-base (6.5_p20251123-r0)
#11 97.56 (59/79) Installing libncursesw (6.5_p20251123-r0)
#11 97.59 (60/79) Installing readline (8.3.1-r0)
#11 97.62 (61/79) Installing postgresql18-client (18.2-r0)
#11 97.80 (62/79) Installing libexpat (2.7.4-r0)
#11 97.82 (63/79) Installing gdbm (1.26-r0)
#11 97.85 (64/79) Installing xz-libs (5.8.2-r0)
#11 97.87 (65/79) Installing mpdecimal (4.0.1-r0)
#11 97.90 (66/79) Installing libpanelw (6.5_p20251123-r0)
#11 97.91 (67/79) Installing sqlite-libs (3.51.2-r0)
#11 98.03 (68/79) Installing python3 (3.12.12-r0)
#11 99.51 (69/79) Installing python3-pycache-pyc0 (3.12.12-r0)
#11 100.2 (70/79) Installing pyc (3.12.12-r0)
#11 100.2 (71/79) Installing py3-setuptools-pyc (80.9.0-r2)
#11 100.6 (72/79) Installing py3-pip-pyc (25.1.1-r1)
#11 101.1 (73/79) Installing py3-packaging-pyc (25.0-r0)
#11 101.1 (74/79) Installing python3-pyc (3.12.12-r0)
#11 101.1 (75/79) Installing py3-parsing (3.2.5-r0)
#11 101.1 (76/79) Installing py3-parsing-pyc (3.2.5-r0)
#11 101.2 (77/79) Installing py3-packaging (25.0-r0)
#11 101.2 (78/79) Installing py3-setuptools (80.9.0-r2)
#11 101.4 (79/79) Installing py3-pip (25.1.1-r1)
#11 101.7 Executing busybox-1.37.0-r30.trigger
#11 101.7 Executing java-common-1.0-r1.trigger
#11 101.7 Executing ca-certificates-20251003-r0.trigger
#11 102.1 Executing postgresql-common-1.2-r2.trigger
#11 102.1 * Setting postgresql18 as the default version
#11 102.3 * WARNING: opening from cache https://dl-cdn.alpinelinux.org/alpine/v3.23/main/x86_64/APKINDEX.tar.gz: No such file or directory
#11 102.3 * WARNING: opening from cache https://dl-cdn.alpinelinux.org/alpine/v3.23/community/x86_64/APKINDEX.tar.gz: No such file or directory
#11 102.3 OK: 602.4 MiB in 97 packages
#11 DONE 104.7s

#15 [stage-1 4/8] COPY backend/package*.json ./
#15 DONE 0.2s

#16 [stage-1 5/8] RUN npm ci --omit=dev
#16 13.13 npm warn deprecated multer@1.4.5-lts.2: Multer 1.x is impacted by a number of vulnerabilities, which have been patched in 2.x. You should upgrade to the latest 2.x version.
#16 13.57 
#16 13.57 added 174 packages, and audited 175 packages in -20s
#16 13.57 
#16 13.57 20 packages are looking for funding
#16 13.57   run `npm fund` for details
#16 13.58 
#16 13.58 1 low severity vulnerability
#16 13.58 
#16 13.58 To address all issues, run:
#16 13.58   npm audit fix
#16 13.58 
#16 13.58 Run `npm audit` for details.
#16 13.58 npm notice
#16 13.58 npm notice New major version of npm available! 10.8.2 -> 11.10.1
#16 13.58 npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.10.1
#16 13.58 npm notice To update run: npm install -g npm@11.10.1
#16 13.58 npm notice
#16 DONE 14.2s

#17 [stage-1 6/8] COPY backend/*.js ./
#17 DONE 0.3s

#18 [stage-1 7/8] RUN mkdir -p /app/backend/public
#18 DONE 0.3s

#19 [stage-1 8/8] COPY --from=frontend-builder /app/client/dist /app/backend/public
#19 DONE 0.1s

#20 exporting to image
#20 exporting layers
#20 exporting layers 40.3s done
#20 exporting manifest sha256:1ba434b56349c05483591770426ac959d4bfdf939e46e1a0939e760ec1514521 0.0s done
#20 exporting config sha256:d61fbe76b14c96cb6baabaf1f09e1a1c4965e698d8b8971f4da7e191fd683d8f 0.1s done
#20 exporting attestation manifest sha256:17dce2502cd8e70e3fa82013f696757bca654933f24b94e09c7924ab1949e396
#20 exporting attestation manifest sha256:17dce2502cd8e70e3fa82013f696757bca654933f24b94e09c7924ab1949e396 0.1s done
#20 exporting manifest list sha256:2b6046503392069ed02f0f2d4f883556ecacd9bd40e7abfc23d8d6e8a47d6ccf 0.0s done
#20 naming to docker.io/library/refine-backend:latest
#20 naming to docker.io/library/refine-backend:latest done
#20 unpacking to docker.io/library/refine-backend:latest
failed to receive status: rpc error: code = Unavailable desc = error reading from server: EOF

